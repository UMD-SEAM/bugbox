var RedBox={overlay:true,onDisplay:null,showInline:function(a){this.appearWindow();this.cloneWindowContents(a)},showHtml:function(a){this.appearWindow();this.htmlWindowContents(a)},appearWindow:function(){var c=$("RB_loading");if(c&&c.visible()){c.hide()}else{this.showOverlay()}var b={duration:0.4,queue:"end"},a=$("RB_window");if(this.onDisplay){b.afterFinish=this.onDisplay}new Effect.Appear(a,b);a.scrollTo()},loading:function(){this.showOverlay();var a=$("RB_loading");if(a){a.show()}this.setWindowPosition()},close:function(){new Effect.Fade("RB_window",{duration:0.4});if(this.overlay){new Effect.Fade("RB_overlay",{duration:0.4})}},showOverlay:function(){var b=$("RB_redbox");if(!b){b=new Element("DIV",{id:"RB_redbox",align:"center"});$(document.body).insert(b);var a=new Element("DIV",{id:"RB_overlay"}).hide();b.insert({top:new Element("DIV",{id:"RB_window"}).hide()}).insert({top:a});if(this.overlay){a.insert({top:new Element("DIV",{id:"RB_loading"}).hide()})}}if(this.overlay){this.setOverlaySize();new Effect.Appear("RB_overlay",{duration:0.4,to:0.6,queue:"end"})}},setOverlaySize:function(){if(window.innerHeight&&window.scrollMaxY){yScroll=window.innerHeight+window.scrollMaxY}else{if(document.body.scrollHeight>document.body.offsetHeight){yScroll=document.body.scrollHeight}else{yScroll=document.body.offsetHeight}}Element.setStyle("RB_overlay",{height:yScroll+"px"})},setWindowPosition:function(){var b=$("RB_window");var c=b.getDimensions(),a=document.viewport.getDimensions();b.setStyle({width:"auto",height:"auto",left:((a.width-c.width)/2)+"px",top:((a.height-c.height)/2)+"px"})},cloneWindowContents:function(a){$("RB_window").appendChild($($(a).cloneNode(true)).setStyle({display:"block"}));this.setWindowPosition()},htmlWindowContents:function(a){$("RB_window").update(a);this.setWindowPosition()},getWindowContents:function(){var a=$("RB_window");return a.visible()?a.down():null},overlayVisible:function(){var a=$("RB_overlay");return a&&a.visible()}};